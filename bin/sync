#!/usr/bin/env bash

# require sudo
if [ "$EUID" -ne 0 ]; then
    echo "root required, try again with sudo"
    exit
fi

# require do
if [ "$#" -ne 1 ]; then
    echo "Usage: $0 <dotfiles_dir>"
    echo "Defaults:"
    echo "  dotfiles_dir=../home"; echo
else
    dotfiles_dir="$1"
fi

find "$dotfiles_dir" -type f | while read -r entry; do
    # echo "[dry run] Syncing $(basename "$entry")"
    ln -sf "$entry" "$HOME/$(basename "$entry")"
done
